# Community

## Overview

The community feature creates a safe, anonymous space where users can share their experiences, seek support, and encourage others on similar recovery journeys. It includes an anonymous posting feed, community challenges, peer support comments, and optional accountability partnerships.

Community feeds are **filtered by addiction type** - users only see posts and challenges from their own recovery community. Users with multiple addictions can switch between communities.

## Addiction-Specific Content

| Addiction | Content File |
|-----------|--------------|
| Pornography | [porn.md](porn.md) |
| Gambling | [gambling.md](gambling.md) |
| Social Media | [social-media.md](social-media.md) |
| Gaming | [gaming.md](gaming.md) |

---

## Title
Anonymous Support Network with Challenges and Peer Accountability

## Problem Statement

Addiction thrives in isolation:

1. **Shame and Secrecy**: Users feel alone, believing no one else struggles with this issue.
2. **No Safe Space**: Most online forums are either too clinical or too triggering.
3. **Lack of Understanding**: Friends and family often don't understand the struggle.
4. **Accountability Gap**: Without others who know, there's no external accountability.
5. **Milestone Loneliness**: Hitting 30 days feels hollow when you can't share it with anyone.
6. **Relapse Isolation**: After a slip, users often spiral without support.

## Solution

### 1. Anonymous Feed
Reddit-style anonymous posts where users share:
- Recovery wins and struggles
- Questions and advice requests
- Motivational content
- Personal milestones

### 2. Community Challenges
Gamified group challenges specific to each addiction type:
- Streak challenges (7-day, 14-day, 30-day)
- Behavior modification challenges
- Engagement challenges

### 3. Support Interactions
- Upvote supportive posts
- Comment with encouragement
- Report inappropriate content
- Save helpful posts

### 4. Accountability Partners (Premium)
Optional 1:1 partnerships:
- Matched by streak length and addiction type
- Daily check-in reminders
- Anonymous messaging
- Mutual support

---

## Screen Content

### Community Feed

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Community                   ğŸ”  [+ Post]   â”‚
â”‚                                             â”‚
â”‚  [All] [Wins] [Struggles] [Questions]       â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Anonymous â€¢ 2h â€¢ Day 45             â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ [Post content - varies by          â”‚   â”‚
â”‚  â”‚  addiction type]                    â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ â–² 127    ğŸ’¬ 23    ğŸ”–               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Anonymous â€¢ 5h â€¢ Day 12             â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ [Struggle post example]             â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ â–² 45     ğŸ’¬ 31    ğŸ”–               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Create Post Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  New Post                        [Post]     â”‚
â”‚                                             â”‚
â”‚  Category:                                  â”‚
â”‚  â—‹ Win ğŸ†   â—‹ Struggle ğŸ’ª   â—‹ Question â“  â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ What's on your mind?               â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚  Your post will be anonymous. Your          â”‚
â”‚  current streak (Day 15) will be shown.     â”‚
â”‚                                             â”‚
â”‚  â˜ Show my journey stage                    â”‚
â”‚  â˜ Allow comments                           â”‚
â”‚                                             â”‚
â”‚         [Post to Community]                 â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Post Detail with Comments

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back                         â‹® (menu)    â”‚
â”‚                                             â”‚
â”‚  Anonymous â€¢ 5h â€¢ Day 12                    â”‚
â”‚                                             â”‚
â”‚  [Post content]                             â”‚
â”‚                                             â”‚
â”‚  â–² 45     ğŸ’¬ 31    ğŸ”–                       â”‚
â”‚                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                             â”‚
â”‚  Comments (31)                              â”‚
â”‚                                             â”‚
â”‚  Anonymous â€¢ Day 67 â€¢ 4h                    â”‚
â”‚  [Helpful comment]                          â”‚
â”‚  â–² 18                                       â”‚
â”‚                                             â”‚
â”‚  Anonymous â€¢ Day 8 â€¢ 3h                     â”‚
â”‚  [Supportive response]                      â”‚
â”‚  â–² 12                                       â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Add a comment...                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Challenges Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Community           [Feed] [Challenges]    â”‚
â”‚                                             â”‚
â”‚  Active Challenges                          â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”¥ [Challenge Name]                 â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ [Challenge description specific     â”‚   â”‚
â”‚  â”‚  to addiction type]                 â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ 234 participants  â€¢  Ends in 5d    â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ Your progress: Day 3 of 7 â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ [View Challenge]                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Post Categories

### Win Posts ğŸ†
Posts celebrating achievements:
- Streak milestones
- Overcoming difficult situations
- Personal growth observations
- Technique successes

### Struggle Posts ğŸ’ª
Posts seeking or offering support during hard times:
- Urge reports
- Relapse processing
- Challenging circumstances
- Emotional difficulties

### Question Posts â“
Posts asking for advice or information:
- "How do you handle X?"
- "Does anyone else experience Y?"
- Technique inquiries
- General questions

---

## Moderation System

### Automated Moderation
- Profanity filter
- Triggering content detection (addiction-specific)
- Link blocking (no external URLs)
- Spam detection (repeated posts)

### Community Guidelines (Universal)
1. Keep posts supportive and recovery-focused
2. No explicit descriptions of content or behavior
3. No sharing personal contact information
4. No promotion of other services
5. Be kind - everyone is struggling

See addiction-specific files for tailored moderation rules.

### Reporting Flow
```
User taps â‹® menu on post
          â†“
Selects "Report"
          â†“
Chooses reason:
â”œâ”€â”€ Inappropriate content
â”œâ”€â”€ Spam
â”œâ”€â”€ Harassment
â”œâ”€â”€ Self-harm concern
â””â”€â”€ Other
          â†“
Optional: Add details
          â†“
Report submitted
          â†“
Moderation queue review
          â†“
Action taken (remove, warn, ban)
```

### Moderation Actions
| Severity | Action | Appeal |
|----------|--------|--------|
| Low | Post removed, warning | Yes |
| Medium | Post removed, 24h mute | Yes |
| High | Post removed, 7d ban | Yes |
| Severe | Permanent ban | Admin only |

---

## Data Model

### Posts
```
community_posts {
  id: UUID
  user_id: UUID
  addiction_type: Enum (porn, gambling, social_media, gaming)
  category: Enum (win, struggle, question)
  content: Text
  streak_at_post: Integer
  stage_at_post: String
  show_stage: Boolean
  allow_comments: Boolean
  upvotes: Integer
  comment_count: Integer
  created_at: DateTime
  is_reported: Boolean
  is_hidden: Boolean
}
```

Note: Community feeds are filtered by addiction_type. Users with multiple addictions see posts from all their addiction types.

### Comments
```
community_comments {
  id: UUID
  post_id: UUID
  user_id: UUID
  content: Text
  streak_at_comment: Integer
  upvotes: Integer
  created_at: DateTime
  is_reported: Boolean
  is_hidden: Boolean
}
```

### Challenges
```
challenges {
  id: UUID
  addiction_type: Enum (porn, gambling, social_media, gaming)
  name: String
  description: Text
  type: Enum (streak, behavior, engagement)
  duration_days: Integer
  start_date: Date
  end_date: Date
  requirement: JSON
  is_premium: Boolean
  participant_count: Integer
  icon: String
}
```

Note: Challenges are addiction-specific. See addiction-specific files for challenge definitions.

### Challenge Participation
```
challenge_participants {
  id: UUID
  challenge_id: UUID
  user_id: UUID
  joined_at: DateTime
  current_progress: Integer
  completed: Boolean
  completed_at: DateTime
  dropped_out: Boolean
}
```

### User Votes
```
user_votes {
  id: UUID
  user_id: UUID
  voteable_type: Enum (post, comment)
  voteable_id: UUID
  vote: Integer (+1 only, upvotes)
  created_at: DateTime
}
```

---

## User Flows

### Creating a Post
```
User taps [+ Post] button
          â†“
Create post modal opens
          â†“
User selects category
          â†“
User writes content
          â†“
User configures options
          â†“
User taps "Post to Community"
          â†“
Post appears in feed
          â†“
User receives notification on engagement
```

### Joining a Challenge
```
User browses challenges tab
          â†“
User taps challenge card
          â†“
Challenge detail opens
          â†“
User reviews requirements
          â†“
User taps "Join Challenge"
          â†“
User added to participants
          â†“
Daily progress tracked
          â†“
Completion badge on finish
```

---

## Notification Content

### Post Engagement
- "Your post received 10 upvotes! Others found it helpful."
- "Someone commented on your post."

### Challenge Updates
- "Challenge starts tomorrow! Are you ready?"
- "You're on Day 4 of the challenge. Keep going!"
- "You completed the challenge! Achievement unlocked."

### Community Highlights
- "Popular post: '[Preview text]...'"
- "New challenge available!"

---

## Integration Points

### With Gamification
- Challenge completion grants achievements
- "Supporter" badge for helpful comments
- "Community Member" badge for first post

### With Streak System
- Posts display current streak
- Challenge progress tied to streak
- Relapse ends active challenge participation

### With Alex
- AI can suggest posting for support
- "Have you tried sharing this in the community?"

### With Analytics
- Community engagement tracked
- Correlation: community activity vs streak success

---

## Agent Implementation Guide

### foundation-agent Tasks
- Create community_posts table with indexes on addiction_type
- Create community_comments table
- Create challenges table with seed data per addiction type
- Create challenge_participants table
- Create user_votes table
- Set up moderation queue table

### backend-agent Tasks
- GET /api/community/posts?addiction_type=X - Feed with pagination, filters
- POST /api/community/posts - Create post
- GET /api/community/posts/:id - Post detail with comments
- POST /api/community/posts/:id/comments - Add comment
- POST /api/community/posts/:id/vote - Upvote
- GET /api/community/challenges?addiction_type=X - Available challenges
- POST /api/community/challenges/:id/join - Join challenge
- POST /api/community/report - Report content

### ui-agent Tasks
- PostCard component
- PostDetail component with comments
- CommentCard component
- CreatePostModal component
- ChallengeCard component
- ChallengeDetail component
- FeedFilters component
- UpvoteButton component

### pages-agent Tasks
- Community feed page (with addiction type filter)
- Post detail page
- Challenges tab
- Challenge detail page
- Create post flow

---

## Success Metrics

**Engagement Metrics**
- Daily active community users per addiction type
- Posts per user per week
- Comments per post average
- Upvote rate

**Challenge Metrics**
- Challenge join rate
- Challenge completion rate
- Return challenge participants

**Support Metrics**
- Response time on struggle posts
- Helpful comment ratio
- Report rate (lower is better)

---

## Free vs Premium

### Free Tier
- Read all posts
- Create 3 posts per week
- Comment unlimited
- Join 1 challenge at a time
- Basic challenges only

### Premium Tier
- Unlimited posts
- Join unlimited challenges
- Premium-only challenges
- Accountability partner matching
- Challenge creation (future)

---

## Privacy & Safety

### Anonymity Guarantees
- No usernames displayed
- No profile pictures
- Only streak/stage shown
- No cross-referencing with other data

### Content Safety
- No external links allowed
- No image uploads
- No personal info requests
- Automated trigger word filtering (addiction-specific)

### Data Handling
- Posts not tied to identity in analytics
- Deletion removes all content
- Report data anonymized
